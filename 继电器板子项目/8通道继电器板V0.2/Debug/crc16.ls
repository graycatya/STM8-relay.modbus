   1                     ; C Compiler for STM8 (COSMIC Software)
   2                     ; Generator V4.2.4 - 19 Dec 2007
   4                     .const:	section	.text
   5  0000               _auchCRCHi:
   6  0000 00            	dc.b	0
   7  0001 c1            	dc.b	193
   8  0002 81            	dc.b	129
   9  0003 40            	dc.b	64
  10  0004 01            	dc.b	1
  11  0005 c0            	dc.b	192
  12  0006 80            	dc.b	128
  13  0007 41            	dc.b	65
  14  0008 01            	dc.b	1
  15  0009 c0            	dc.b	192
  16  000a 80            	dc.b	128
  17  000b 41            	dc.b	65
  18  000c 00            	dc.b	0
  19  000d c1            	dc.b	193
  20  000e 81            	dc.b	129
  21  000f 40            	dc.b	64
  22  0010 01            	dc.b	1
  23  0011 c0            	dc.b	192
  24  0012 80            	dc.b	128
  25  0013 41            	dc.b	65
  26  0014 00            	dc.b	0
  27  0015 c1            	dc.b	193
  28  0016 81            	dc.b	129
  29  0017 40            	dc.b	64
  30  0018 00            	dc.b	0
  31  0019 c1            	dc.b	193
  32  001a 81            	dc.b	129
  33  001b 40            	dc.b	64
  34  001c 01            	dc.b	1
  35  001d c0            	dc.b	192
  36  001e 80            	dc.b	128
  37  001f 41            	dc.b	65
  38  0020 01            	dc.b	1
  39  0021 c0            	dc.b	192
  40  0022 80            	dc.b	128
  41  0023 41            	dc.b	65
  42  0024 00            	dc.b	0
  43  0025 c1            	dc.b	193
  44  0026 81            	dc.b	129
  45  0027 40            	dc.b	64
  46  0028 00            	dc.b	0
  47  0029 c1            	dc.b	193
  48  002a 81            	dc.b	129
  49  002b 40            	dc.b	64
  50  002c 01            	dc.b	1
  51  002d c0            	dc.b	192
  52  002e 80            	dc.b	128
  53  002f 41            	dc.b	65
  54  0030 00            	dc.b	0
  55  0031 c1            	dc.b	193
  56  0032 81            	dc.b	129
  57  0033 40            	dc.b	64
  58  0034 01            	dc.b	1
  59  0035 c0            	dc.b	192
  60  0036 80            	dc.b	128
  61  0037 41            	dc.b	65
  62  0038 01            	dc.b	1
  63  0039 c0            	dc.b	192
  64  003a 80            	dc.b	128
  65  003b 41            	dc.b	65
  66  003c 00            	dc.b	0
  67  003d c1            	dc.b	193
  68  003e 81            	dc.b	129
  69  003f 40            	dc.b	64
  70  0040 01            	dc.b	1
  71  0041 c0            	dc.b	192
  72  0042 80            	dc.b	128
  73  0043 41            	dc.b	65
  74  0044 00            	dc.b	0
  75  0045 c1            	dc.b	193
  76  0046 81            	dc.b	129
  77  0047 40            	dc.b	64
  78  0048 00            	dc.b	0
  79  0049 c1            	dc.b	193
  80  004a 81            	dc.b	129
  81  004b 40            	dc.b	64
  82  004c 01            	dc.b	1
  83  004d c0            	dc.b	192
  84  004e 80            	dc.b	128
  85  004f 41            	dc.b	65
  86  0050 00            	dc.b	0
  87  0051 c1            	dc.b	193
  88  0052 81            	dc.b	129
  89  0053 40            	dc.b	64
  90  0054 01            	dc.b	1
  91  0055 c0            	dc.b	192
  92  0056 80            	dc.b	128
  93  0057 41            	dc.b	65
  94  0058 01            	dc.b	1
  95  0059 c0            	dc.b	192
  96  005a 80            	dc.b	128
  97  005b 41            	dc.b	65
  98  005c 00            	dc.b	0
  99  005d c1            	dc.b	193
 100  005e 81            	dc.b	129
 101  005f 40            	dc.b	64
 102  0060 00            	dc.b	0
 103  0061 c1            	dc.b	193
 104  0062 81            	dc.b	129
 105  0063 40            	dc.b	64
 106  0064 01            	dc.b	1
 107  0065 c0            	dc.b	192
 108  0066 80            	dc.b	128
 109  0067 41            	dc.b	65
 110  0068 01            	dc.b	1
 111  0069 c0            	dc.b	192
 112  006a 80            	dc.b	128
 113  006b 41            	dc.b	65
 114  006c 00            	dc.b	0
 115  006d c1            	dc.b	193
 116  006e 81            	dc.b	129
 117  006f 40            	dc.b	64
 118  0070 01            	dc.b	1
 119  0071 c0            	dc.b	192
 120  0072 80            	dc.b	128
 121  0073 41            	dc.b	65
 122  0074 00            	dc.b	0
 123  0075 c1            	dc.b	193
 124  0076 81            	dc.b	129
 125  0077 40            	dc.b	64
 126  0078 00            	dc.b	0
 127  0079 c1            	dc.b	193
 128  007a 81            	dc.b	129
 129  007b 40            	dc.b	64
 130  007c 01            	dc.b	1
 131  007d c0            	dc.b	192
 132  007e 80            	dc.b	128
 133  007f 41            	dc.b	65
 134  0080 01            	dc.b	1
 135  0081 c0            	dc.b	192
 136  0082 80            	dc.b	128
 137  0083 41            	dc.b	65
 138  0084 00            	dc.b	0
 139  0085 c1            	dc.b	193
 140  0086 81            	dc.b	129
 141  0087 40            	dc.b	64
 142  0088 00            	dc.b	0
 143  0089 c1            	dc.b	193
 144  008a 81            	dc.b	129
 145  008b 40            	dc.b	64
 146  008c 01            	dc.b	1
 147  008d c0            	dc.b	192
 148  008e 80            	dc.b	128
 149  008f 41            	dc.b	65
 150  0090 00            	dc.b	0
 151  0091 c1            	dc.b	193
 152  0092 81            	dc.b	129
 153  0093 40            	dc.b	64
 154  0094 01            	dc.b	1
 155  0095 c0            	dc.b	192
 156  0096 80            	dc.b	128
 157  0097 41            	dc.b	65
 158  0098 01            	dc.b	1
 159  0099 c0            	dc.b	192
 160  009a 80            	dc.b	128
 161  009b 41            	dc.b	65
 162  009c 00            	dc.b	0
 163  009d c1            	dc.b	193
 164  009e 81            	dc.b	129
 165  009f 40            	dc.b	64
 166  00a0 00            	dc.b	0
 167  00a1 c1            	dc.b	193
 168  00a2 81            	dc.b	129
 169  00a3 40            	dc.b	64
 170  00a4 01            	dc.b	1
 171  00a5 c0            	dc.b	192
 172  00a6 80            	dc.b	128
 173  00a7 41            	dc.b	65
 174  00a8 01            	dc.b	1
 175  00a9 c0            	dc.b	192
 176  00aa 80            	dc.b	128
 177  00ab 41            	dc.b	65
 178  00ac 00            	dc.b	0
 179  00ad c1            	dc.b	193
 180  00ae 81            	dc.b	129
 181  00af 40            	dc.b	64
 182  00b0 01            	dc.b	1
 183  00b1 c0            	dc.b	192
 184  00b2 80            	dc.b	128
 185  00b3 41            	dc.b	65
 186  00b4 00            	dc.b	0
 187  00b5 c1            	dc.b	193
 188  00b6 81            	dc.b	129
 189  00b7 40            	dc.b	64
 190  00b8 00            	dc.b	0
 191  00b9 c1            	dc.b	193
 192  00ba 81            	dc.b	129
 193  00bb 40            	dc.b	64
 194  00bc 01            	dc.b	1
 195  00bd c0            	dc.b	192
 196  00be 80            	dc.b	128
 197  00bf 41            	dc.b	65
 198  00c0 00            	dc.b	0
 199  00c1 c1            	dc.b	193
 200  00c2 81            	dc.b	129
 201  00c3 40            	dc.b	64
 202  00c4 01            	dc.b	1
 203  00c5 c0            	dc.b	192
 204  00c6 80            	dc.b	128
 205  00c7 41            	dc.b	65
 206  00c8 01            	dc.b	1
 207  00c9 c0            	dc.b	192
 208  00ca 80            	dc.b	128
 209  00cb 41            	dc.b	65
 210  00cc 00            	dc.b	0
 211  00cd c1            	dc.b	193
 212  00ce 81            	dc.b	129
 213  00cf 40            	dc.b	64
 214  00d0 01            	dc.b	1
 215  00d1 c0            	dc.b	192
 216  00d2 80            	dc.b	128
 217  00d3 41            	dc.b	65
 218  00d4 00            	dc.b	0
 219  00d5 c1            	dc.b	193
 220  00d6 81            	dc.b	129
 221  00d7 40            	dc.b	64
 222  00d8 00            	dc.b	0
 223  00d9 c1            	dc.b	193
 224  00da 81            	dc.b	129
 225  00db 40            	dc.b	64
 226  00dc 01            	dc.b	1
 227  00dd c0            	dc.b	192
 228  00de 80            	dc.b	128
 229  00df 41            	dc.b	65
 230  00e0 01            	dc.b	1
 231  00e1 c0            	dc.b	192
 232  00e2 80            	dc.b	128
 233  00e3 41            	dc.b	65
 234  00e4 00            	dc.b	0
 235  00e5 c1            	dc.b	193
 236  00e6 81            	dc.b	129
 237  00e7 40            	dc.b	64
 238  00e8 00            	dc.b	0
 239  00e9 c1            	dc.b	193
 240  00ea 81            	dc.b	129
 241  00eb 40            	dc.b	64
 242  00ec 01            	dc.b	1
 243  00ed c0            	dc.b	192
 244  00ee 80            	dc.b	128
 245  00ef 41            	dc.b	65
 246  00f0 00            	dc.b	0
 247  00f1 c1            	dc.b	193
 248  00f2 81            	dc.b	129
 249  00f3 40            	dc.b	64
 250  00f4 01            	dc.b	1
 251  00f5 c0            	dc.b	192
 252  00f6 80            	dc.b	128
 253  00f7 41            	dc.b	65
 254  00f8 01            	dc.b	1
 255  00f9 c0            	dc.b	192
 256  00fa 80            	dc.b	128
 257  00fb 41            	dc.b	65
 258  00fc 00            	dc.b	0
 259  00fd c1            	dc.b	193
 260  00fe 81            	dc.b	129
 261  00ff 40            	dc.b	64
 262  0100               _auchCRCLo:
 263  0100 00            	dc.b	0
 264  0101 c0            	dc.b	192
 265  0102 c1            	dc.b	193
 266  0103 01            	dc.b	1
 267  0104 c3            	dc.b	195
 268  0105 03            	dc.b	3
 269  0106 02            	dc.b	2
 270  0107 c2            	dc.b	194
 271  0108 c6            	dc.b	198
 272  0109 06            	dc.b	6
 273  010a 07            	dc.b	7
 274  010b c7            	dc.b	199
 275  010c 05            	dc.b	5
 276  010d c5            	dc.b	197
 277  010e c4            	dc.b	196
 278  010f 04            	dc.b	4
 279  0110 cc            	dc.b	204
 280  0111 0c            	dc.b	12
 281  0112 0d            	dc.b	13
 282  0113 cd            	dc.b	205
 283  0114 0f            	dc.b	15
 284  0115 cf            	dc.b	207
 285  0116 ce            	dc.b	206
 286  0117 0e            	dc.b	14
 287  0118 0a            	dc.b	10
 288  0119 ca            	dc.b	202
 289  011a cb            	dc.b	203
 290  011b 0b            	dc.b	11
 291  011c c9            	dc.b	201
 292  011d 09            	dc.b	9
 293  011e 08            	dc.b	8
 294  011f c8            	dc.b	200
 295  0120 d8            	dc.b	216
 296  0121 18            	dc.b	24
 297  0122 19            	dc.b	25
 298  0123 d9            	dc.b	217
 299  0124 1b            	dc.b	27
 300  0125 db            	dc.b	219
 301  0126 da            	dc.b	218
 302  0127 1a            	dc.b	26
 303  0128 1e            	dc.b	30
 304  0129 de            	dc.b	222
 305  012a df            	dc.b	223
 306  012b 1f            	dc.b	31
 307  012c dd            	dc.b	221
 308  012d 1d            	dc.b	29
 309  012e 1c            	dc.b	28
 310  012f dc            	dc.b	220
 311  0130 14            	dc.b	20
 312  0131 d4            	dc.b	212
 313  0132 d5            	dc.b	213
 314  0133 15            	dc.b	21
 315  0134 d7            	dc.b	215
 316  0135 17            	dc.b	23
 317  0136 16            	dc.b	22
 318  0137 d6            	dc.b	214
 319  0138 d2            	dc.b	210
 320  0139 12            	dc.b	18
 321  013a 13            	dc.b	19
 322  013b d3            	dc.b	211
 323  013c 11            	dc.b	17
 324  013d d1            	dc.b	209
 325  013e d0            	dc.b	208
 326  013f 10            	dc.b	16
 327  0140 f0            	dc.b	240
 328  0141 30            	dc.b	48
 329  0142 31            	dc.b	49
 330  0143 f1            	dc.b	241
 331  0144 33            	dc.b	51
 332  0145 f3            	dc.b	243
 333  0146 f2            	dc.b	242
 334  0147 32            	dc.b	50
 335  0148 36            	dc.b	54
 336  0149 f6            	dc.b	246
 337  014a f7            	dc.b	247
 338  014b 37            	dc.b	55
 339  014c f5            	dc.b	245
 340  014d 35            	dc.b	53
 341  014e 34            	dc.b	52
 342  014f f4            	dc.b	244
 343  0150 3c            	dc.b	60
 344  0151 fc            	dc.b	252
 345  0152 fd            	dc.b	253
 346  0153 3d            	dc.b	61
 347  0154 ff            	dc.b	255
 348  0155 3f            	dc.b	63
 349  0156 3e            	dc.b	62
 350  0157 fe            	dc.b	254
 351  0158 fa            	dc.b	250
 352  0159 3a            	dc.b	58
 353  015a 3b            	dc.b	59
 354  015b fb            	dc.b	251
 355  015c 39            	dc.b	57
 356  015d f9            	dc.b	249
 357  015e f8            	dc.b	248
 358  015f 38            	dc.b	56
 359  0160 28            	dc.b	40
 360  0161 e8            	dc.b	232
 361  0162 e9            	dc.b	233
 362  0163 29            	dc.b	41
 363  0164 eb            	dc.b	235
 364  0165 2b            	dc.b	43
 365  0166 2a            	dc.b	42
 366  0167 ea            	dc.b	234
 367  0168 ee            	dc.b	238
 368  0169 2e            	dc.b	46
 369  016a 2f            	dc.b	47
 370  016b ef            	dc.b	239
 371  016c 2d            	dc.b	45
 372  016d ed            	dc.b	237
 373  016e ec            	dc.b	236
 374  016f 2c            	dc.b	44
 375  0170 e4            	dc.b	228
 376  0171 24            	dc.b	36
 377  0172 25            	dc.b	37
 378  0173 e5            	dc.b	229
 379  0174 27            	dc.b	39
 380  0175 e7            	dc.b	231
 381  0176 e6            	dc.b	230
 382  0177 26            	dc.b	38
 383  0178 22            	dc.b	34
 384  0179 e2            	dc.b	226
 385  017a e3            	dc.b	227
 386  017b 23            	dc.b	35
 387  017c e1            	dc.b	225
 388  017d 21            	dc.b	33
 389  017e 20            	dc.b	32
 390  017f e0            	dc.b	224
 391  0180 a0            	dc.b	160
 392  0181 60            	dc.b	96
 393  0182 61            	dc.b	97
 394  0183 a1            	dc.b	161
 395  0184 63            	dc.b	99
 396  0185 a3            	dc.b	163
 397  0186 a2            	dc.b	162
 398  0187 62            	dc.b	98
 399  0188 66            	dc.b	102
 400  0189 a6            	dc.b	166
 401  018a a7            	dc.b	167
 402  018b 67            	dc.b	103
 403  018c a5            	dc.b	165
 404  018d 65            	dc.b	101
 405  018e 64            	dc.b	100
 406  018f a4            	dc.b	164
 407  0190 6c            	dc.b	108
 408  0191 ac            	dc.b	172
 409  0192 ad            	dc.b	173
 410  0193 6d            	dc.b	109
 411  0194 af            	dc.b	175
 412  0195 6f            	dc.b	111
 413  0196 6e            	dc.b	110
 414  0197 ae            	dc.b	174
 415  0198 aa            	dc.b	170
 416  0199 6a            	dc.b	106
 417  019a 6b            	dc.b	107
 418  019b ab            	dc.b	171
 419  019c 69            	dc.b	105
 420  019d a9            	dc.b	169
 421  019e a8            	dc.b	168
 422  019f 68            	dc.b	104
 423  01a0 78            	dc.b	120
 424  01a1 b8            	dc.b	184
 425  01a2 b9            	dc.b	185
 426  01a3 79            	dc.b	121
 427  01a4 bb            	dc.b	187
 428  01a5 7b            	dc.b	123
 429  01a6 7a            	dc.b	122
 430  01a7 ba            	dc.b	186
 431  01a8 be            	dc.b	190
 432  01a9 7e            	dc.b	126
 433  01aa 7f            	dc.b	127
 434  01ab bf            	dc.b	191
 435  01ac 7d            	dc.b	125
 436  01ad bd            	dc.b	189
 437  01ae bc            	dc.b	188
 438  01af 7c            	dc.b	124
 439  01b0 b4            	dc.b	180
 440  01b1 74            	dc.b	116
 441  01b2 75            	dc.b	117
 442  01b3 b5            	dc.b	181
 443  01b4 77            	dc.b	119
 444  01b5 b7            	dc.b	183
 445  01b6 b6            	dc.b	182
 446  01b7 76            	dc.b	118
 447  01b8 72            	dc.b	114
 448  01b9 b2            	dc.b	178
 449  01ba b3            	dc.b	179
 450  01bb 73            	dc.b	115
 451  01bc b1            	dc.b	177
 452  01bd 71            	dc.b	113
 453  01be 70            	dc.b	112
 454  01bf b0            	dc.b	176
 455  01c0 50            	dc.b	80
 456  01c1 90            	dc.b	144
 457  01c2 91            	dc.b	145
 458  01c3 51            	dc.b	81
 459  01c4 93            	dc.b	147
 460  01c5 53            	dc.b	83
 461  01c6 52            	dc.b	82
 462  01c7 92            	dc.b	146
 463  01c8 96            	dc.b	150
 464  01c9 56            	dc.b	86
 465  01ca 57            	dc.b	87
 466  01cb 97            	dc.b	151
 467  01cc 55            	dc.b	85
 468  01cd 95            	dc.b	149
 469  01ce 94            	dc.b	148
 470  01cf 54            	dc.b	84
 471  01d0 9c            	dc.b	156
 472  01d1 5c            	dc.b	92
 473  01d2 5d            	dc.b	93
 474  01d3 9d            	dc.b	157
 475  01d4 5f            	dc.b	95
 476  01d5 9f            	dc.b	159
 477  01d6 9e            	dc.b	158
 478  01d7 5e            	dc.b	94
 479  01d8 5a            	dc.b	90
 480  01d9 9a            	dc.b	154
 481  01da 9b            	dc.b	155
 482  01db 5b            	dc.b	91
 483  01dc 99            	dc.b	153
 484  01dd 59            	dc.b	89
 485  01de 58            	dc.b	88
 486  01df 98            	dc.b	152
 487  01e0 88            	dc.b	136
 488  01e1 48            	dc.b	72
 489  01e2 49            	dc.b	73
 490  01e3 89            	dc.b	137
 491  01e4 4b            	dc.b	75
 492  01e5 8b            	dc.b	139
 493  01e6 8a            	dc.b	138
 494  01e7 4a            	dc.b	74
 495  01e8 4e            	dc.b	78
 496  01e9 8e            	dc.b	142
 497  01ea 8f            	dc.b	143
 498  01eb 4f            	dc.b	79
 499  01ec 8d            	dc.b	141
 500  01ed 4d            	dc.b	77
 501  01ee 4c            	dc.b	76
 502  01ef 8c            	dc.b	140
 503  01f0 44            	dc.b	68
 504  01f1 84            	dc.b	132
 505  01f2 85            	dc.b	133
 506  01f3 45            	dc.b	69
 507  01f4 87            	dc.b	135
 508  01f5 47            	dc.b	71
 509  01f6 46            	dc.b	70
 510  01f7 86            	dc.b	134
 511  01f8 82            	dc.b	130
 512  01f9 42            	dc.b	66
 513  01fa 43            	dc.b	67
 514  01fb 83            	dc.b	131
 515  01fc 41            	dc.b	65
 516  01fd 81            	dc.b	129
 517  01fe 80            	dc.b	128
 518  01ff 40            	dc.b	64
 597                     ; 68 u16 crc16_modbus( u8 *puchMsg, u8 usDataLen)
 597                     ; 69 {
 599                     	switch	.text
 600  0000               _crc16_modbus:
 602  0000 89            	pushw	x
 603  0001 5204          	subw	sp,#4
 604       00000004      OFST:	set	4
 607                     ; 70 	u8 uchCRCHi = 0xFF; 
 609  0003 a6ff          	ld	a,#255
 610  0005 6b01          	ld	(OFST-3,sp),a
 611                     ; 71 	u8 uchCRCLo	= 0xFF; 
 613  0007 a6ff          	ld	a,#255
 614  0009 6b02          	ld	(OFST-2,sp),a
 616  000b 2021          	jra	L35
 617  000d               L74:
 618                     ; 76 		uIndex = uchCRCHi ^ *puchMsg++; 
 620  000d 1e05          	ldw	x,(OFST+1,sp)
 621  000f 1c0001        	addw	x,#1
 622  0012 1f05          	ldw	(OFST+1,sp),x
 623  0014 1d0001        	subw	x,#1
 624  0017 f6            	ld	a,(x)
 625  0018 1801          	xor	a,(OFST-3,sp)
 626  001a 5f            	clrw	x
 627  001b 97            	ld	xl,a
 628  001c 1f03          	ldw	(OFST-1,sp),x
 629                     ; 77 		uchCRCHi = uchCRCLo ^ auchCRCHi[uIndex];
 631  001e 1e03          	ldw	x,(OFST-1,sp)
 632  0020 d60000        	ld	a,(_auchCRCHi,x)
 633  0023 1802          	xor	a,(OFST-2,sp)
 634  0025 6b01          	ld	(OFST-3,sp),a
 635                     ; 78 		uchCRCLo = auchCRCLo[uIndex];
 637  0027 1e03          	ldw	x,(OFST-1,sp)
 638  0029 d60100        	ld	a,(_auchCRCLo,x)
 639  002c 6b02          	ld	(OFST-2,sp),a
 640  002e               L35:
 641                     ; 74 	while(usDataLen--) 
 643  002e 7b09          	ld	a,(OFST+5,sp)
 644  0030 0a09          	dec	(OFST+5,sp)
 645  0032 4d            	tnz	a
 646  0033 26d8          	jrne	L74
 647                     ; 81 	return( (u16)uchCRCHi << 8|uchCRCLo); 
 649  0035 7b01          	ld	a,(OFST-3,sp)
 650  0037 5f            	clrw	x
 651  0038 97            	ld	xl,a
 652  0039 4f            	clr	a
 653  003a 02            	rlwa	x,a
 654  003b 01            	rrwa	x,a
 655  003c 1a02          	or	a,(OFST-2,sp)
 656  003e 02            	rlwa	x,a
 659  003f 5b06          	addw	sp,#6
 660  0041 81            	ret
 695                     	xdef	_auchCRCLo
 696                     	xdef	_auchCRCHi
 697                     	xdef	_crc16_modbus
 716                     	end
